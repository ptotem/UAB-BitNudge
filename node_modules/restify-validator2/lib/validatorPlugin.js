// Generated by CoffeeScript 1.6.3
var Validator, ValidatorError;

Validator = require('validator').Validator;

ValidatorError = require('./validatorError');

module.exports = function(req, res, next) {
  req._validatorErrors = [];
  req.check = function(values, name, failMessage) {
    var validator, value;
    validator = new Validator();
    value = values != null ? values[name] : void 0;
    validator.error = function(message) {
      var error;
      error = {
        name: name,
        value: value,
        message: message
      };
      return req._validatorErrors.push(error);
    };
    return validator.check(value, failMessage);
  };
  req.getValidatorErrors = function() {
    return req._validatorErrors;
  };
  req.getValidatorErrorResponse = function() {
    var errors;
    errors = req.getValidatorErrors();
    if (errors != null ? errors.length : void 0) {
      return new ValidatorError(errors);
    } else {
      return null;
    }
  };
  return next();
};
